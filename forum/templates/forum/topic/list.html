{% extends "forum/base.html" %}

{% block title %}{{ section.name }}{% endblock %}

{% block content %}
  <br>
  <hr>
  {% if topics %}
    {% for topic in topics %}
    <a href="{% url 'forum:topic_view' section.name topic.title%}">
      <p style="float: right">
        {{ topic.created | date:'Y-m-d H:i' }}
      </p>
      <p style="float: left">
        {{ topic.owner }}
      </p>
      <br><br>
      <div>
        <p class="section-list">
            {{ topic.title }}
        </p>
      </div>
    </a>
    <hr>
    {% endfor %}
    <div class="center-text">
      {% include "pagination.html" with page=topics %}
    </div>
  {% else %}
    <p class="center-text">No topics yet</p>
  {% endif %}  
{% endblock %}

{% block side %}
    {% if add == 'True' %}
    <div class="adjust-margin-top">
    <div class="center-text input-center">
    <form method="post" action="{% url 'forum:topic_list' section.name %}">
      {% csrf_token %}
        <input type="hidden" name="first_checker" value="True">
        <b>Title:</b> <input class="form-control" type="text" aria-label="Title" name="title" value="{{ valid.title }}">
        {% if errors.title %}
            <div class="error">{{ errors.title }}</div>
        {% endif %}
        <br><b>Body:</b><textarea rows="3" class="form-control" name="body" value="{{ valid.body }}"></textarea>
        {% if errors.body %}
            <div class="error">{{ errors.body }}</div>
        {% endif %}
        <br><button class="btn btn-outline-success my-2 my-sm-0" type="submit">Add topic</button>
    </form>
    <form method="post" action="{% url 'forum:topic_list' section.name %}">
        {% csrf_token %}
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Cancel</button>
    </form>
    </div>
    </div>
    {% else %}
    <div class="center-text adjust-margin-top">
      <b>Section:</b> {{ section.name }}<br>
      <b>Owner: </b> {{ section.owner }}<br>
      <b>Description:</b> {{ section.description }}<br><br>
      <form method="post" action="">
          {% csrf_token %}
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Subscribe</button>
      </form>
      <form method="post" action="{% url 'forum:topic_list' section.name %}">
          {% csrf_token %}
          <input type="hidden" name="checker_if_add" value="True">
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Add topic</button>
      </form>
    </div>    
    {% endif %}
{% endblock %}